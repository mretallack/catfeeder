




00 c0 ca 21 34 80 1f 12 ff fe e8 8d d9 ff 45 00 00 7e 02 00



RX - beacon
b'+PDAI=1343C843FFFFFFFF6E2A02C0F9D5B370072FE9EB\r\n'


Tx - our becon 
b'+PDAI=1600C0212134801F12FFFEE88DD9FF4500007E0200D9DC\r\n'


RX - Association Request
b'+PDAI=1B63CC44FFFF801F12FFFEE88DD96E2A02C0F9D5B37001000413F0E8\r\n'

63 cc 7c ff ff 80 1f 12 ff fe e8 8d d9 16 2e 02 c0 f9 d5 b3 70 01 00 04 30

TX - ACK
b'+PDAI=05020044D9DD\r\n'


Sending 02 00 44 
need to send:
0000   02 00 7c

no the 7c is the seqence number of the frame that is being acked


# then this is restransmitted....
b'+PDAI=1B63CC2221346E2A02C0F9D5B370801F12FFFEE88DD902810000DAE1\r\n'
b'+PDAI=1B63CC2221346E2A02C0F9D5B370801F12FFFEE88DD902810000D8D9\r\n'
b'+PDAI=1B63CC2221346E2A02C0F9D5B370801F12FFFEE88DD902810000D9E2\r\n'
b'+PDAI=1B63CC2221346E2A02C0F9D5B370801F12FFFEE88DD902810000D9DA\r\n'

decode:

1B 63CC 22 2134 6E2A02C0F9D5B370 80 1F12FFFEE88DD902810000DAE1

2134=Pan
6E2A02C0F9D5B370=Mac


should be:

63 cc cb 21 34 16 2e 02 c0 f9 d5 b3 70 80 1f 12 ff fe e8 8d d9 02 fe ff 00

got:
63 CC 22 21 34 6E 2A 02 C0 F9 D5 B3 70 80 1F 12 FF FE E8 8D D9 02 81 00 00 D9 DA

So,

22=seqence
6E 2A 02 C0 F9 D5 B3 70  = Mac of my device


so sending 02 81 00 00, not 02 fe ff 00

So the petsure is sending a short address of 0xfffe, not 0x0081






b'+PDAI=1343C845FFFFFFFF6E2A02C0F9D5B370072FEDE8\r\n'
b'+PDAI=1600C0232134801F12FFFEE88DD9FF4500007E0200D9DE\r\n'



b'+PDAI=1343C846FFFFFFFF6E2A02C0F9D5B370072FEDEB\r\n'
b'+PDAI=1600C0242134801F12FFFEE88DD9FF4500007E0200D9D8\r\n'
b'+PDAI=1343C847FFFFFFFF6E2A02C0F9D5B370072FEBE8\r\n'
b'+PDAI=1600C0252134801F12FFFEE88DD9FF4500007E0200D9DF\r\n'
b'+PDAI=1B63CC48FFFF801F12FFFEE88DD96E2A02C0F9D5B37001000415EFE8\r\n'
b'+PDAI=05020048DADE\r\n'
b'+PDAI=1B63CC2621346E2A02C0F9D5B370801F12FFFEE88DD902810000D9DF\r\n'
b'+PDAI=1B63CC2621346E2A02C0F9D5B370801F12FFFEE88DD902810000DAD6\r\n'
b'+PDAI=1B63CC2621346E2A02C0F9D5B370801F12FFFEE88DD902810000DAD9\r\n'
b'+PDAI=1B63CC2621346E2A02C0F9D5B370801F12FFFEE88DD902810000D9D9\r\n'






and again:





b'+PDAI=1343C8D9FFFFFFFF6E2A02C0F9D5B370072FEBE6\r\n'
b'+PDAI=1B63CCDAFFFF801F12FFFEE88DD96E2A02C0F9D5B3700100040EECE9\r\n'
b'+PDAI=1B63CC2221346E2A02C0F9D5B370801F12FFFEE88DD902FEFF00D8D6\r\n'
b'+PDAI=1B63CC2221346E2A02C0F9D5B370801F12FFFEE88DD902FEFF00D7D3\r\n'
b'+PDAI=1B63CC2221346E2A02C0F9D5B370801F12FFFEE88DD902FEFF00D7CE\r\n'
b'+PDAI=1B63CC2221346E2A02C0F9D5B370801F12FFFEE88DD902FEFF00D7CB\r\n'
b'+PDAI=1343C8DBFFFFFFFF6E2A02C0F9D5B370072FEFE9\r\n'
b'+PDAI=1600C0232134801F12FFFEE88DD9FF4500007E0200D8DC\r\n'
b'+PDAI=1343C8DCFFFFFFFF6E2A02C0F9D5B370072FEDE9\r\n'
b'+PDAI=1600C0242134801F12FFFEE88DD9FF4500007E0200DAE1\r\n'
b'+PDAI=1B63CCDDFFFF801F12FFFEE88DD96E2A02C0F9D5B37001000412EFE8\r\n'
b'+PDAI=050200DDDADC\r\n'



b'+PDAI=1B63CC2521346E2A02C0F9D5B370801F12FFFEE88DD902FEFF00D9DA\r\n'
b'+PDAI=1B63CC2521346E2A02C0F9D5B370801F12FFFEE88DD902FEFF00D9D4\r\n'
b'+PDAI=1B63CC2521346E2A02C0F9D5B370801F12FFFEE88DD902FEFF00D9E0\r\n'
b'+PDAI=1B63CC2521346E2A02C0F9D5B370801F12FFFEE88DD902FEFF00D9DD\r\n'


should be:

63 cc cb 21 34 16 2e 02 c0 f9 d5 b3 70 80 1f 12 ff fe e8 8d d9 02 fe ff 00 10 ea


63 CC 25 21 34 6E 2A 02 C0 F9 D5 B3 70 80 1F 12 FF FE E8 8D D9 02 FE FF 00 D9 DA

so exact, so timing?


So now:


b'+PDAI=1343C87EFFFFFFFF6E2A02C0F9D5B370072FEBE9\r\n'
b'+PDAI=1343C87FFFFFFFFF6E2A02C0F9D5B370072FECE8\r\n'
b'+PDAI=1343C880FFFFFFFF6E2A02C0F9D5B370072FEDE8\r\n'
b'+PDAI=1343C881FFFFFFFF6E2A02C0F9D5B370072FEDE8\r\n'
b'+PDAI=1600C0212134801F12FFFEE88DD9FF4500007E0200D9DC\r\n'
b'+PDAI=1B63CC82FFFF801F12FFFEE88DD96E2A02C0F9D5B37001000412EDE7\r\n'
b'+PDAI=05020082D9DA\r\n'
b'+PDAI=1B63CC2221346E2A02C0F9D5B370801F12FFFEE88DD902810000D9DB\r\n'
b'+PDAI=05020022EBEA\r\n'
b'+PDAI=1B61CC832134801F12FFFEE88DD96E2A02C0F9D5B37013550403EDE8\r\n'
b'+PDAI=05020083D9D4\r\n'


b'+PDAI=1B61CC842134801F12FFFEE88DD96E2A02C0F9D5B37013560403EDE9\r\n'
b'+PDAI=05020084D8DD\r\n'



so it sends:

61 CC 83 21 34 80 1F 12 FF FE E8 8D D9 6E 2A 02 C0 F9 D5 B3 70 13 55 04 03 ED E8

61 cc 7d 21 34 80 1f 12 ff fe e8 8d d9 16 2e 02 c0 f9 d5 b3 70 13 70 04 03 12 ea



Ok, data sending...



4188212134FFFF000004022134FFFF213400002111DBE8

41 cc 

cc 21 34 16 2e 02 c0 f9 d5 b3 70 80 1f 12 ff fe e8 8d d9 14 a8 70 00 10 ea

So 88 is wrong. 



6188 26 213481000000040221348100213400002411D9E0

is

41 CC 24 21 34 6E 2A 02 C0 F9 D5 B3 70 332212FFFEE88DD9000000000000000000000011DADB


41 cc cc 21 34 16 2e 02 c0 f9 d5 b3 70 80 1f 12 ff fe e8 8d d9 14 a8 70 00 10 ea


41CC21 2134 6E2A02C0F9D5B370 3322 12FFFEE88DD9000000000000000000000011DCE2


41CC23 2134 6E2A02C0F9D5B370 332212FFFE E88DD9028100007E02000000000011 D7D1


41CC 23 2134 6E2A02C0F9D5B370 332212FFFEE88DD9 11 DCE8



Also

so, is it using the socket functions within MiWi? This is what we have:

08 ca 01 c4 11 0d 00 0b 7b 00 03 00 04 00


#define MIWI_STACK_REPORT_TYPE 0x00
    #define OPEN_SOCKET_REQUEST 0x10
    #define OPEN_SOCKET_RESPONSE 0x11
    #define EUI_ADDRESS_SEARCH_REQUEST 0x20
    #define EUI_ADDRESS_SEARCH_RESPONSE 0x21
    #define ACK_REPORT_TYPE 0x30
    
    #define CHANNEL_HOPPING_REQUEST     0x40
    #define RESYNCHRONIZATION_REQUEST   0x41
    #define RESYNCHRONIZATION_RESPONSE  0x42


and the ack:


02 cd aa 00

So does not really match at all :(

RX: 08 25 01 c4 12 14 00 0d 67 00 0c 03 3d 00 
RX: 08 26 01 c4 12 14 00 0d 68 00 0d 03 3d 00 
RX: 08 27 01 c4 12 15 00 0d 69 00 0e 03 3d 00 
RX: 08 29 01 c4 12 15 00 10 6a 00 10 03 3d 00 
RX: 08 2b 01 c4 12 15 00 0c 6b 00 12 03 3d 00 
RX: 08 2d 01 c4 12 15 00 0f 6c 00 14 03 3d 00 
RX: 08 2f 01 c4 12 15 00 0f 6d 00 16 03 3d 00 
RX: 08 31 01 c4 12 15 00 0c 6e 00 18 03 3d 00 
RX: 08 33 01 c4 12 15 00 0e 6f 00 1a 03 3d 00 
RX: 08 35 01 c4 12 15 00 0f 70 00 1c 03 3d 00 
RX: 08 37 01 c4 12 15 00 09 71 00 1e 03 3d 00 
RX: 08 39 01 c4 12 15 00 0f 72 00 20 03 3d 00 
RX: 08 3b 01 c4 12 15 00 11 73 00 22 03 3d 00 
RX: 08 3d 01 c4 12 15 00 0f 74 00 24 03 3d 00 
RX: 08 3f 01 c4 12 16 00 09 75 00 26 03 3d 00 
RX: 08 41 01 c4 12 16 00 0b 76 00 28 03 3d 00 
RX: 08 43 01 c4 12 16 00 04 77 00 2a 03 3d 00 
RX: 08 45 01 c4 12 16 00 0c 78 00 2c 03 3d 00 
RX: 08 47 01 c4 12 16 00 04 79 00 2e 03 3d 00 
RX: 08 49 01 c4 12 16 00 08 7a 00 30 03 3d 00 
RX: 08 4b 01 c4 12 16 00 0d 7b 00 32 03 3d 00 
RX: 08 4d 01 c4 12 16 00 10 7c 00 34 03 3d 00 
RX: 08 4f 01 c4 12 16 00 11 7d 00 36 03 3d 00 
RX: 08 51 01 c4 12 16 00 0c 7e 00 38 03 3d 00 
RX: 08 53 01 c4 12 16 00 10 7f 00 3a 03 3d 00 
RX: 08 55 01 c4 12 16 00 0f 80 00 3c 03 3d 00 
RX: 08 57 01 c4 12 17 00 0f 81 00 3e 03 3d 00 

serial number 
141 934 =
0x22A6E























